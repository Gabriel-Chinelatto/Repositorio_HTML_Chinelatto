<!DOCTYPE html>
<html lang="pt-BR">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">

  <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.3/dist/css/bootstrap.min.css" rel="stylesheet">
  <link rel="stylesheet" href="estilos.css">

  <title>Empresas Parceiras</title>
</head>
<body>

<section id="empresas-page" class="container py-4">
  <h2 class="mb-3">Empresas Parceiras</h2>
  <p class="lead">Conheça as empresas que colaboram com doações.</p>

  <div id="empresas-list" class="row g-3"></div>

  <div id="empresas-empty" class="mt-3 text-muted" style="display:none;">Nenhuma empresa encontrada.</div>
</section>

<script>
  async function loadEmpresas() {
    try {
      const res = await fetch('empresas.json', {cache: 'no-store'});
      if (!res.ok) throw new Error('Falha ao carregar');
      const data = await res.json();
      renderEmpresas(data);
    } catch (e) {
      document.getElementById('empresas-empty').textContent = 'Erro ao carregar empresas.';
      document.getElementById('empresas-empty').style.display = 'block';
    }
  }

  function renderEmpresas(list) {
    const container = document.getElementById('empresas-list');
    const empty = document.getElementById('empresas-empty');

    container.innerHTML = '';

    if (!list || list.length === 0) {
      empty.style.display = 'block';
      return;
    }

    empty.style.display = 'none';

    list.forEach(item => {
      const col = document.createElement('div');
      col.className = 'col-md-4';

      const card = document.createElement('div');
      card.className = 'card h-100';

      const body = document.createElement('div');
      body.className = 'card-body';

      const title = document.createElement('h5');
      title.className = 'card-title';
      title.textContent = item.nome || '—';

      const desc = document.createElement('p');
      desc.textContent = `${item.cidade || ''} • ${item.area || ''}`;

      const badge = document.createElement('span');
      badge.className = 'badge badge-doacao rounded-pill px-2 py-1';
      badge.textContent = item.doacoes || '—';

      body.appendChild(title);
      body.appendChild(desc);
      body.appendChild(badge);

      card.appendChild(body);
      col.appendChild(card);
      container.appendChild(col);
    });
  }

  loadEmpresas();
</script>

<script src="https://cdn.jsdelivr.net/npm/bootstrap@5.3.3/dist/js/bootstrap.bundle.min.js"></script>
</body>
</html>
